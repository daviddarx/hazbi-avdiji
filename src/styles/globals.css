@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  /* Responsive Spacers */
  --spacer-8: theme('spacing.6');
  --spacer-12: theme('spacing.10');
  --spacer-16: theme('spacing.12');
  --spacer-20: theme('spacing.14');
  --spacer-24: theme('spacing.16');
  --spacer-32: theme('spacing.20');
  --spacer-40: theme('spacing.24');
  --spacer-48: theme('spacing.24');
  --spacer-56: theme('spacing.28');
  --spacer-64: theme('spacing.32');
  --spacer-80: theme('spacing.48');
  --spacer-96: theme('spacing.56');
  --spacer-120: theme('spacing.64');
  --v-spacer-120: theme('spacing.64');
  --gutter: theme('spacing.16');
  --color-theme: theme('colors.theme1');
  --color-theme-prev: theme('colors.theme6');
  --color-theme-next: theme('colors.theme2');
  --color-black-darker: color-mix(in lab, theme('colors.black') 40%, black);
  --color-black-darkest: color-mix(in lab, theme('colors.black') 5%, black);
  --radius-cards: 1.4em;

  @screen xs {
    --gutter: theme('spacing.24');
  }

  @screen lg {
    --spacer-8: theme('spacing.8');
    --spacer-12: theme('spacing.12');
    --spacer-16: theme('spacing.16');
    --spacer-20: theme('spacing.20');
    --spacer-24: theme('spacing.24');
    --spacer-32: theme('spacing.32');
    --spacer-40: theme('spacing.40');
    --spacer-48: theme('spacing.48');
    --spacer-56: theme('spacing.56');
    --spacer-64: theme('spacing.64');
    --spacer-80: theme('spacing.80');
    --spacer-96: theme('spacing.96');
    --spacer-120: theme('spacing.120');
    --v-spacer-120: theme('spacing.120');
    --gutter: theme('spacing.32');

    @media (max-height: 1024px) {
      --v-spacer-120: theme('spacing.80');
    }
  }

  @screen xl {
    --gutter: theme('spacing.40');
  }
}

@layer base {
  html,
  body {
    @apply h-full w-full;
  }

  div#__next {
    @apply h-full;
  }

  body {
    @apply bg-themed text-base !leading-normal text-black lg:text-2xl;

    .dark & {
      color: color-mix(in lab, var(--color-theme) 70%, transparent);
    }
  }

  h1,
  .h1 {
    @apply text-4xl xl:text-7xl;
  }

  h2,
  .h2 {
    @apply text-3xl xl:text-4xl;
  }

  h3,
  .h3 {
    @apply text-2xl xl:text-3xl;
  }

  h4,
  .h4 {
    @apply text-xl xl:text-2xl;
  }

  h5,
  .h5,
  h6,
  .h6 {
    @apply text-lg xl:text-xl;
  }

  h1,
  .h1,
  h2,
  .h2,
  h3,
  .h3,
  h4,
  .h4,
  h5,
  .h5,
  h6,
  .h6 {
    @apply font-normal leading-title dark:text-theme;

    font-family: var(--font-title);
  }

  ::selection {
    @apply bg-black text-theme dark:bg-theme dark:text-black;
    text-shadow: none;
  }

  :focus-visible {
    @apply rounded-cards;
    outline: 5px solid color-mix(in lab, theme('colors.black') 35%, transparent);

    .dark & {
      outline: 5px solid color-mix(in lab, var(--color-theme) 35%, transparent);
    }

    .ios & {
      outline-color: transparent;
    }
  }

  a,
  button {
    .dark & {
      @apply text-theme;
    }
  }
}

@layer utilities {
  .font-text {
    font-family: var(--font-text);
  }

  .first-mt-0 {
    & > *:first-child {
      @apply mt-0;
    }
  }

  .last-mb-0 {
    & > *:last-child {
      @apply mb-0;
    }
  }

  .admin-only {
    display: none;

    .__tina-quick-editing-enabled & {
      display: block;
    }
  }

  .bg-themed {
    @apply bg-theme;

    .dark & {
      background-color: var(--color-black-darker);
    }
  }

  .bg-themed-prev {
    @apply bg-theme-prev;

    .dark & {
      background-color: var(--color-black-darkest);
    }
  }

  .bg-themed-next {
    @apply bg-theme-next;

    .dark & {
      @apply bg-black;
    }
  }

  .bg-blurred {
    @apply backdrop-blur-md;
    background-color: color-mix(in lab, var(--color-theme) 30%, transparent);

    .dark & {
      background-color: color-mix(in lab, var(--color-black-darker) 50%, transparent);
    }
  }

  .bg-strong {
    @apply bg-black text-theme dark:bg-theme;

    .dark & {
      color: var(--color-black-darker);
    }
  }

  .border-strong {
    @apply border-black dark:border-theme;
  }

  .border-light {
    @apply border-black/20;

    .dark & {
      border-color: color-mix(in lab, var(--color-theme) 20%, transparent);
    }
  }
}

@layer components {
  .pill {
    @apply border-light inline-block rounded-full border px-[1.5em] py-[0.5em];
  }

  .button {
    @apply pill bg-themed hashover:hover:bg-themed-prev hashover:hover:border-strong font-bold !no-underline transition-colors duration-200 ease-out;
  }

  .button--primary {
    @apply bg-strong text-theme;
  }

  .subtitle {
    @apply font-text text-base font-bold uppercase tracking-widest;
  }

  .tag {
    @apply pill bg-blurred text-base font-bold;
  }

  .text-container {
    & > {
      & p,
      & ul,
      & ol,
      & address,
      & blockquote,
      & table,
      a.button {
        @apply mb-spacer-32;
      }

      & div {
        @apply mb-spacer-32;
      }

      & h1,
      & .h1 {
        @apply mb-spacer-32 mt-spacer-64;
      }

      & h2,
      & .h2 {
        @apply mb-spacer-24 mt-spacer-48;
      }

      & h3,
      & .h3 {
        @apply mb-spacer-12 mt-spacer-24;
      }

      & h4,
      & .h4 {
        @apply mb-spacer-8 mt-spacer-16;
      }

      & ol,
      & ul {
        li:last-child {
          @apply last-mb-0;
        }
      }

      & ol {
        @apply list-decimal;
      }

      & ul {
        @apply list-disc;
      }

      & ul,
      ol {
        @apply list-inside;

        & li {
          & div {
            @apply inline-block;
          }
        }
      }

      & table {
        @apply w-full;

        & td {
          @apply py-8 pr-20;
        }

        & tr:first-of-type {
          @apply border-strong border-b font-bold;
        }
      }
    }

    & a.text-link {
      @apply underline transition-opacity duration-200 ease-out hashover:hover:no-underline hashover:hover:opacity-50;
    }

    & .button {
      @apply px-[0.75em] py-[0em] dark:!bg-black/25;
    }

    & blockquote {
      @apply rounded-lg bg-black/5 p-spacer-20;
    }

    & code {
      @apply inline-block rounded-lg bg-black/5 px-6;
    }

    @apply first-mt-0 last-mb-0;
  }

  .grid-layout {
    @apply mx-auto max-w-[1280px] px-gutter lg:grid lg:grid-cols-12;
  }

  .grid-item-full {
    @apply col-start-1 col-end-13;
  }

  .grid-item-left {
    @apply col-start-1 col-end-10;
  }

  .grid-item-right {
    @apply col-start-4 col-end-13;
  }
}
